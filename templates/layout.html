<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IITCUP - DOCUMENTOLOGIA</title>
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"/>
    <!-- Font Awesome -->
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/fontawesome-free/css/all.min.css')}}"/>
    <!-- DataTables -->
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css')}}"/>
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/datatables-responsive/css/responsive.bootstrap4.min.css')}}"/>
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/datatables-buttons/css/buttons.bootstrap4.min.css')}}"/>
    <!-- IonIcons -->
    <link rel="stylesheet"href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"/>
    <!--  -->
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css')}}"/>
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/icheck-bootstrap/icheck-bootstrap.min.css')}}"/>
    <link rel="stylesheet" href="{{url_for('static', filename='/plugins/jqvmap/jqvmap.min.css')}}"/>
    <!-- Theme style -->
    <link rel="stylesheet" href="{{url_for('static', filename='/css/adminlte.min.css')}}"/>
    <!-- overlayScrollbars -->
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/overlayScrollbars/css/OverlayScrollbars.min.css')}}"/>
    <!--  -->
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/daterangepicker/daterangepicker.css')}}"/>
    <link rel="stylesheet"href="{{url_for('static', filename='/plugins/summernote/summernote-bs4.min.css')}}"/>
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="{{url_for('static', filename='/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css')}}"/>
    <!-- Toastr -->
    <link rel="stylesheet" href="{{url_for('static', filename='/plugins/toastr/toastr.min.css')}}"/>
    <link rel="stylesheet" href="{{url_for('static', filename='/plugins/cropperjs/cropper.css')}}"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body class="hold-transition sidebar-mini layout-fixed">
    <div class="wrapper">
      <!-- Preloader -->
      <div
        class="preloader flex-column justify-content-center align-items-center"
      >
        <img
          class="animation__wobble"
          src="{{url_for('static', filename='/img/AdminLTELogo.png')}}"
          alt="AdminLTELogo"
          height="60"
          width="60"
        />
      </div>

      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-dark">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button">
              <i class="fas fa-bars"></i>
            </a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
            <a href="{{ url_for('dashboard') }}" class="nav-link">Inicio</a>
          </li>
        </ul>
      
        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
          <!-- Fullscreen Icon -->
          <li class="nav-item">
            <a class="nav-link" data-widget="fullscreen" href="#" role="button">
              <i class="fas fa-expand-arrows-alt"></i>
            </a>
          </li>
      
          <!-- Admin Dropdown Menu -->
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
              <i class="fas fa-user"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <div class="dropdown-item user-header text-center">
                <img
                  src="{{ url_for('static', filename='Users_Profile/perfil_usuarios/' + session['imagen']) }}"
                  style="width: 150px; height: 150px;"
                  class="img-circle"
                  alt="User Image"
                />
                <p>
                  <!-- Mostrar el nombre del usuario desde la sesión -->
                  {{ session['nombre'] }} {{ session['apellido'] }}
                  Miembro desde {{ session['fecha'].strftime('%d/%m/%Y') }}
                </p>
              </div>
          
              <!-- Footer with profile and logout -->
              <div class="dropdown-item user-footer">
                <div class="d-flex justify-content-between">
                  
                  <a href="" class="" type="button" data-toggle="modal" data-target="#modal-editar-perfil">Perfil</a>
                  <!--button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#modal-editar-perfil">Editar</button-->
                  
                  
                  
                  <!-- Botón de Cerrar Sesión con formulario POST -->
                  <form action="{{ url_for('logout') }}" method="POST">
                    <button type="submit" class="btn btn-primary" >Cerrar Sesión</button>
                  </form>
                </div>
              </div>
              
            </div>
          </li>          
          
        </ul>
      </nav>
      
      
      <!-- /.navbar -->
      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <div class="brand-link d-flex align-items-center" style="padding: 13px">
          <span
            class="brand-text font-weight-light"
            style="
              flex-grow: 1;
              text-overflow: ellipsis;
              overflow: hidden;
              white-space: nowrap;
            "
            >IITCUP-DOCUMENTOLOGIA</span
          >
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Sidebar user panel (optional) -->
          <div class="user-panel mt-1 pb-1 mb-1 d-flex align-items-center">
            <div class="image">
              <img
                src="{{ url_for('static', filename='Users_Profile/perfil_usuarios/' + session['imagen']) }}"
                
                class="img-circle elevation-2"
                alt="User Image"
              />
            </div>
            <div class="info">
              <p class="d-block mb-0" style="color: white;">Bienvenido</p>
              <a href="#" class="d-block">{{ session['nombre'] }}<br>{{ session['apellido'] }}</a>
            </div>
          </div>

          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
              role="menu"
              data-accordion="false"
            >
              <li class="nav-header">GENERAL</li>
              <li class="nav-item">
                <a href="/dashboard" class="nav-link" id="nav_inicio">
                  <i class="nav-icon fas fa-th"></i>
                  <p>Inicio</p>
                </a>
              </li>
              {% if session['admin']==1 %}
                <li class="nav-item" id="li_usuarios">
                  <a href="#" class="nav-link" >
                    <i class="nav-icon fas fa-tachometer-alt"></i>
                    <p>
                      Peritos Investigativos
                      <i class="right fas fa-angle-left"></i>
                    </p>
                  </a>
                  <ul class="nav nav-treeview">
                    <li class="nav-item">
                      <a href="{{ url_for('usuarios') }}" class="nav-link" id="nav_usuarios">
                        <i class="far fa-circle nav-icon"></i>
                        <p>Usuarios</p>
                      </a>
                    </li>
                  </ul>
                </li>
              {% endif %}
              
              <li class="nav-header">CASOS PERITALES</li>
              <li class="nav-item" id="li_casos">
                <a href="#" class="nav-link">
                  <i class="nav-icon fas fa-search"></i>
                  <p>
                    Gestionar Casos
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="{{ url_for('new_case') }}" class="nav-link" id="nav_agregar_caso">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Agregar Caso</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{ url_for('listar_casos') }}" class="nav-link" id="nav_listas_caso">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Listar Caso</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li class="nav-header">DOCUMENTOLOGIA</li>
              <li class="nav-item" id="li_firmas">
                <a href="#" class="nav-link">
                  <i class="nav-icon fas fa-search"></i>
                  <p><i class="fas fa-angle-left right"></i>Firmas</p>
                </a>
                <ul class="nav nav-treeview">
                  <!-- <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Agregar firma</p>
                    </a>
                  </li> -->
                  <li class="nav-item">
                    <a href="{{ url_for('signatures') }}" class="nav-link" id="nav_scopometria">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Scopometria</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="{{ url_for('comparar') }}" class="nav-link" id="nav_firmas">
                      <i class="far fa-circle nav-icon"></i>
                      <p>Comparar Firmas</p>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
      </aside>
      {% block body %} {% endblock %}
      <!-- Control Sidebar -->
      <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
      </aside>
      <!-- /.control-sidebar -->

      <!-- Main Footer -->
      <!-- <footer class="main-footer">
        <strong>Copyright &copy; 2023-2024.</strong>
        All rights reserved.
        <div class="float-right d-none d-sm-inline-block">
          <b>Version</b> 3.2.0
        </div>
      </footer> -->
    </div>
    <div class="modal fade" id="modal-editar-perfil">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title"><i class="fa fa-user"></i><b> Perfil de Usuario</b></h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form action="/editar_perfil/{{session['id_usuario']}}" method="POST" enctype="multipart/form-data" id="new-user-form">
              <div class="row">
                <div class="col-md-6">
                  <!-- Nombre con un máximo de 20 caracteres -->
                  <div class="form-group">
                    <label for="nombre">Nombre(s)</label>
                    <input type="text" class="form-control" name="Nombre" value="{{session['nombre']}}" maxlength="20" readonly>
                  </div>

                  <!-- Apellido con un máximo de 20 caracteres -->
                  <div class="form-group">
                    <label for="apellido">Apellido(s)</label>
                    <input type="text" class="form-control" name="apellido" value="{{session['apellido']}}" maxlength="20" readonly>
                  </div>

                  <!-- Edad -->
                  <div class="form-group">
                    <label for="edad">Edad</label>
                    <input type="number" class="form-control" name="edad" value="{{session['edad']}}" readonly>
                  </div>

                  <!-- CI solo números y máximo de 10 caracteres -->
                  <div class="form-group">
                    <label for="ci">CI</label>
                    <input type="text" class="form-control" name="cedula" value="{{session['carnet']}}" maxlength="10" pattern="\d*" readonly>
                  </div>

                  <!-- Número de celular solo números y máximo de 10 caracteres -->
                  <div class="form-group">
                    <label for="celular">Num. de Celular</label>
                    <input type="text" class="form-control" name="celular" value="{{session['telefono']}}" maxlength="10" pattern="\d*" required>
                  </div>
                </div>

                <div class="col-md-6">
                  <!-- Correo electrónico -->
                  <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" class="form-control" name="email" value="{{session['email']}}" required>
                  </div>

                  <!-- Nombre de usuario -->
                  <div class="form-group">
                    <label for="user">Nombre de Usuario</label>
                    <input type="text" class="form-control" name="user" value="{{session['usuario']}}" required>
                  </div>

                  <!-- Contraseña -->
                  <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" class="form-control" name="password" value="{{session['contrasena']}}" required>
                  </div>

                  <!-- Sexo -->
                  <div class="form-group">
                    <label for="sexo">Sexo</label>
                    <input type="text" class="form-control" name="sexo" value="{{session['sexo']}}" readonly/>
                  </div>

                  <!-- Subir imagen -->
                  <div class="form-group">
                    <label for="imagen">Imagen Perfil</label>
                    <input type="hidden" name="imagen_actual" value="{{ session['imagen'] }}">
                    {% if session['imagen'] %}
                      <img src="{{ url_for('static', filename='Users_Profile/perfil_usuarios/' + session['imagen']) }}" alt="IMGPERFIL" style="width: 150px; height: auto;">
                    {% endif %}
                    <input type="file" class="form-control-file" name="imagen" id="imagen">
                  </div>
                </div>
              </div>

              <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-close"></i> Cerrar</button>
                <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i> Guardar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- ./wrapper -->

    <!-- REQUIRED SCRIPTS -->
    <!-- jQuery -->
    <script src="{{url_for('static', filename='/plugins/jquery/jquery.min.js')}}"></script>
    <!-- Bootstrap 4-->
    <script src="{{url_for('static', filename='/plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
    <!-- SweetAlert2 -->
    <script src="{{url_for('static', filename='/plugins/sweetalert2/sweetalert2.min.js')}}"></script>
    <!-- Toastr -->
    <script src="{{url_for('static', filename='/plugins/toastr/toastr.min.js')}}"></script>
    <!-- overlayScrollbars -->
    <script src="{{url_for('static', filename='/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js')}}"></script>
    <!-- ChartJS -->
    <script src="{{url_for('static', filename='/plugins/chart.js/Chart.min.js')}}"></script>
    <!-- DataTables  & Plugins -->
    <script src="{{url_for('static', filename='/plugins/datatables/jquery.dataTables.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-responsive/js/dataTables.responsive.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-responsive/js/responsive.bootstrap4.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-buttons/js/dataTables.buttons.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-buttons/js/buttons.bootstrap4.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/jszip/jszip.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/pdfmake/pdfmake.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/pdfmake/vfs_fonts.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-buttons/js/buttons.html5.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/datatables-buttons/js/buttons.print.min.js')}}"></script>
    <script src="{{url_for('static', filename='/plugins/cropperjs/cropper.js')}}"></script>

    <!-- AdminLTE App -->
 
    <script src="{{url_for('static', filename='/js/adminlte.js')}}"></script>
    <!-- AdminLTE -->
    <script src="{{url_for('static', filename='/js/pages/dashboard2.js')}}"></script>
    <!-- Page specific script -->
    
    <script>
      $(function () {
        $("#example1")
          .DataTable({
            responsive: true,
            lengthChange: false,
            autoWidth: false,
            language: idioma_español,
            buttons: ["copy", "csv", "excel", "pdf", "print"],
          })
          .buttons()
          .container()
          .appendTo("#example1_wrapper .col-md-6:eq(0)");
        $("#example2").DataTable({
          paging: true,
          lengthChange: false,
          searching: false,
          ordering: true,
          info: true,
          autoWidth: false,
          responsive: true,
          language: idioma_español,
        });
      });
      var idioma_español = {
        sProcessing: "Procesando...",
        sLengthMenu: "Mostrar _MENU_ registros",
        sZeroRecords: "No se encontraron resultados",
        sEmptyTable: "Ningún dato disponible en esta tabla",
        sInfo:
          "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
        sInfoEmpty: "Mostrando registros del 0 al 0 de un total de 0 registros",
        sInfoFiltered: "(filtrado de un total de _MAX_ registros)",
        sInfoPostFix: "",
        sSearch: "Buscar:",
        sUrl: "",
        sInfoThousands: ",",
        sLoadingRecords: "Cargando...",
        oPaginate: {
          sFirst: "Primero",
          sLast: "Último",
          sNext: "Siguiente",
          sPrevious: "Anterior",
        },
        oAria: {
          sSortAscending:
            ": Activar para ordenar la columna de manera ascendente",
          sSortDescending:
            ": Activar para ordenar la columna de manera descendente",
        },
      };
    </script>
  </body>
</html>
